@model MyProject.Models.UsuarioModel

@{
    ViewData["Title"] = "Criar Usuário";
}

<div class="container">
    <h1 class="display-4 mb-4">Cadastrar Usuário</h1>

    <div class="row">
        <div class="col-md-8">
            <form asp-action="Criar" method="post">
                <div class="mb-3">
                    <label asp-for="Nome" class="form-label">Nome Completo</label>
                    <input asp-for="Nome" class="form-control" placeholder="Digite o nome completo do usuário">
                    <span asp-validation-for="Nome" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="Email" class="form-label">E-mail</label>
                    <input asp-for="Email" type="email" class="form-control" placeholder="Digite um e-mail válido">
                    <span asp-validation-for="Email" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="Contato" class="form-label">Contato</label>
                    <input asp-for="Contato" class="form-control" placeholder="Digite o telefone de contato">
                    <span asp-validation-for="Contato" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="Senha" class="form-label">Senha</label>
                    <input asp-for="Senha" type="password" class="form-control" placeholder="Digite uma senha">
                    <div class="form-text">
                        Sua senha deve ter de 8 a 20 caracteres, conter letras e números.
                    </div>
                    <span asp-validation-for="Senha" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label for="confirma_senha" class="form-label">Confirmar Senha</label>
                    <input type="password" id="confirma_senha" class="form-control" placeholder="Confirme a senha">
                    <div id="senhaErro" class="form-text text-danger" style="display: none;">
                        As senhas não coincidem.
                    </div>
                </div>

                <div class="mb-3">
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="fas fa-save"></i> Cadastrar
                    </button>
                    <a class="btn btn-secondary btn-lg" asp-controller="Usuario" asp-action="Index">
                        <i class="fas fa-arrow-left"></i> Voltar
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // Função para validar se as senhas coincidem
    function validarSenhas() {
        const senha = document.querySelector('input[name="Senha"]').value;
        const confirmaSenha = document.getElementById('confirma_senha').value;
        const erroDiv = document.getElementById('senhaErro');

        if (confirmaSenha === '') {
            erroDiv.style.display = 'none';
            return;
        }

        if (senha !== confirmaSenha) {
            erroDiv.style.display = 'block';
        } else {
            erroDiv.style.display = 'none';
        }
    }

    // Adiciona eventos para validar em tempo real
    document.getElementById('confirma_senha').addEventListener('input', validarSenhas);
    document.querySelector('input[name="Senha"]').addEventListener('input', validarSenhas);
</script>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
